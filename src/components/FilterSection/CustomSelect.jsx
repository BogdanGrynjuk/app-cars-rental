import Select from 'react-select';
import PropTypes from 'prop-types';

const customStyles = {
  control: provided => ({
    ...provided,
    width: '100%',      
    padding: '12px 8px',
    backgroundColor: 'rgba(247, 247, 251, 1)',
    borderRadius: '12px',
    border: 'none',
    fontSize: '16px',
    fontWeight: '600',
    lineHeight: '20px',
    svg: { color: "rgba(18, 20, 23, 1)" },
    boxShadow:" rgba(0, 0, 0, 0.5) 2px 3px 5px",
    '&:hover': {
      boxShadow:" rgba(0, 0, 0, 0.5) 2px 8px 5px",
    },
  }),
  menu: provided =>  ({
    ...provided,
    padding: '14px 8px',
    borderRadius: '12px',
    boxShadow:" rgba(0, 0, 0, 0.5) 2px 8px 5px",
  }),
  menuList: provided => ({
    ...provided,
    paddingRight: '8px',
    '::-webkit-scrollbar': {
      width: '7px',      
    },
    '::-webkit-scrollbar-thumb': {
      background: 'rgba(18, 20, 23, 0.5)',
      borderRadius: '12px',
    },
  }),
  option: (provided, state) => ({
    ...provided,        
    backgroundColor: 'transparent',
    color: state.isSelected ? 'rgba(52, 112, 255, 1)' : 'rgba(18, 20, 23, 0.5)',
    fontWeight: state.isSelected && '600',
    cursor: 'pointer',
    "&:hover": {
        color: state.isSelected ? 'rgba(52, 112, 255, 1)' : 'rgba(18, 20, 23, 1)',
        backgroundColor: "transparent",
      },
  }),
  dropdownIndicator: (provided, state) => {    
    return ({
      ...provided,
      color: 'rgba(18, 20, 23, 1)',
      cursor: 'pointer',
      transform: state.isFocused && 'rotate(180deg)',
    })
  },
  indicatorSeparator: provided => ({
    ...provided,
   display: 'none',
  }),
  placeholder: (provided, state) => ({
    ...provided,
    display: state.isFocused && "none",
    backgroundColor: 'rgba(247, 247, 251, 1)',
    color: 'rgba(18, 20, 23, 1)',
    fontSize: '14px',
    fontWeight: '500',
    lineHeight: '20px',    
  }),
  
};

const CustomSelect = ({ field, form, options, placeholder }) => {
  const selectedOption = options.find((option) => option.value === field.value) || '';

  const handleChange = (selectedOption) => {
    form.setFieldValue(field.name, selectedOption ? selectedOption.value : '');
  };
  const handleBlur = () => {
    form.setFieldTouched(field.name, true);
  };

  return (
    <Select
      name={field.name}
      styles={customStyles}
      options={options}
      placeholder={placeholder}
      onChange={handleChange}
      onBlur={handleBlur}
      value={selectedOption || ''}
    />
  );
};

CustomSelect.propTypes = {
  field: PropTypes.shape({
    name: PropTypes.string.isRequired,
    value: PropTypes.any,
  }),
  form: PropTypes.object.isRequired,
  options: PropTypes.array.isRequired,
  placeholder: PropTypes.string,
};

export default CustomSelect;